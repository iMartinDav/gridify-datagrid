#!/bin/sh

# Include Husky script
. "$(dirname "$0")/_/husky.sh"

# Echo a message indicating the actions being performed
echo 'ğŸš€ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‰ Initiating the styling, testing, and building of your project before committing...ğŸ‘¨ğŸ»â€ğŸ’»ğŸ‰'

# Check Prettier standards
npm run check-format || (
    echo 'ğŸ¨ğŸš« Prettier Check Failed! ğŸ˜±ğŸ’”.
            Prettier Check Failed. Run npm run format, add changes and try commit again.';
    false;
)

# Check ESLint Standards
npm run check-lint || (
    echo 'ğŸ”ğŸš¨ Oh no, ESLint found some issues!ğŸ˜°ğŸ’¥
                ESLint Check Failed. Make the required changes listed above, add changes and try to commit again.'
    false;
)

# Check tsconfig standards
npm run check-types || (
    echo 'ğŸ¤–âŒ Oops! Type check failed!ğŸ˜“ğŸ’¡
            Are you seriously trying to write that? Make the changes required above.'
    false;
)

# If everything passes, try to build
echo 'ğŸ‘ŒğŸ»ğŸ”¨ Code looks good! Initiating build...ğŸ¤”ğŸ’ªğŸ»'

npm run build || (
    echo 'ğŸ—ï¸ğŸ˜ Build failed! ğŸ˜­ğŸ’”
            Next build failed: View the errors above to see why.
    '
    false;
)

# If everything passes, commit
echo 'âœ…ğŸ‰ Everything looks fantastic! You are all set to commit!ğŸ¥³ğŸˆğŸ’š'
